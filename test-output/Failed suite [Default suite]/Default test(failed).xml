<?xml version="1.0" encoding="UTF-8"?>
<!-- Generated by org.testng.reporters.JUnitXMLReporter -->
<testsuite hostname="hal-51" name="Default test(failed)" tests="3" failures="0" timestamp="10 Aug 2013 00:09:03 GMT" time="5.596" errors="0">
  <testcase name="@AfterClass logout" time="0.0" classname="com.bleulace.domain.crm.command.CreateGroupCommandTest">
    <failure type="org.springframework.transaction.TransactionSystemException" message="Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130507-3faac2b): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Referential integrity constraint violation: &amp;quot;FK_ACCOUNTGROUP_ACCOUNT_MEMBERS_ID: PUBLIC.ACCOUNTGROUP_ACCOUNT FOREIGN KEY(MEMBERS_ID) REFERENCES PUBLIC.RESOURCE(ID) (&amp;apos;0d605d26-4ed4-4079-9975-56212a883380&amp;apos;)&amp;quot;; SQL statement:
DELETE FROM RESOURCE WHERE (ID = ?) [23503-172]
Error Code: 23503
Call: DELETE FROM RESOURCE WHERE (ID = ?)
	bind =&amp;gt; [0d605d26-4ed4-4079-9975-56212a883380]
Query: DeleteObjectQuery(com.bleulace.domain.crm.model.BleulaceAccount@604d75c)">
      <![CDATA[org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130507-3faac2b): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Referential integrity constraint violation: "FK_ACCOUNTGROUP_ACCOUNT_MEMBERS_ID: PUBLIC.ACCOUNTGROUP_ACCOUNT FOREIGN KEY(MEMBERS_ID) REFERENCES PUBLIC.RESOURCE(ID) ('0d605d26-4ed4-4079-9975-56212a883380')"; SQL statement:
DELETE FROM RESOURCE WHERE (ID = ?) [23503-172]
Error Code: 23503
Call: DELETE FROM RESOURCE WHERE (ID = ?)
	bind => [0d605d26-4ed4-4079-9975-56212a883380]
Query: DeleteObjectQuery(com.bleulace.domain.crm.model.BleulaceAccount@604d75c)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:522)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:755)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:724)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:475)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:270)
	at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:63)
	at com.bleulace.domain.AuthenticationTest.logout(AuthenticationTest.java:58)
Caused by: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130507-3faac2b): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Referential integrity constraint violation: "FK_ACCOUNTGROUP_ACCOUNT_MEMBERS_ID: PUBLIC.ACCOUNTGROUP_ACCOUNT FOREIGN KEY(MEMBERS_ID) REFERENCES PUBLIC.RESOURCE(ID) ('0d605d26-4ed4-4079-9975-56212a883380')"; SQL statement:
DELETE FROM RESOURCE WHERE (ID = ?) [23503-172]
Error Code: 23503
Call: DELETE FROM RESOURCE WHERE (ID = ?)
	bind => [0d605d26-4ed4-4079-9975-56212a883380]
Query: DeleteObjectQuery(com.bleulace.domain.crm.model.BleulaceAccount@604d75c)
	at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:157)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:513)
	... 30 more
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130507-3faac2b): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Referential integrity constraint violation: "FK_ACCOUNTGROUP_ACCOUNT_MEMBERS_ID: PUBLIC.ACCOUNTGROUP_ACCOUNT FOREIGN KEY(MEMBERS_ID) REFERENCES PUBLIC.RESOURCE(ID) ('0d605d26-4ed4-4079-9975-56212a883380')"; SQL statement:
DELETE FROM RESOURCE WHERE (ID = ?) [23503-172]
Error Code: 23503
Call: DELETE FROM RESOURCE WHERE (ID = ?)
	bind => [0d605d26-4ed4-4079-9975-56212a883380]
Query: DeleteObjectQuery(com.bleulace.domain.crm.model.BleulaceAccount@604d75c)
	at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:331)
	at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:895)
	at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:957)
	at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:630)
	at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:558)
	at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1995)
	at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:296)
	at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:242)
	at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteObject(DatasourceCallQueryMechanism.java:203)
	at org.eclipse.persistence.internal.queries.StatementQueryMechanism.deleteObject(StatementQueryMechanism.java:104)
	at org.eclipse.persistence.queries.DeleteObjectQuery.executeDatabaseQuery(DeleteObjectQuery.java:218)
	at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:899)
	at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:798)
	at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
	at org.eclipse.persistence.queries.DeleteObjectQuery.executeInUnitOfWorkObjectLevelModifyQuery(DeleteObjectQuery.java:119)
	at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2894)
	at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1797)
	at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1779)
	at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1730)
	at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:336)
	at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:285)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1442)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1529)
	at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:277)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1167)
	at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:132)
	... 31 more
Caused by: org.h2.jdbc.JdbcSQLException: Referential integrity constraint violation: "FK_ACCOUNTGROUP_ACCOUNT_MEMBERS_ID: PUBLIC.ACCOUNTGROUP_ACCOUNT FOREIGN KEY(MEMBERS_ID) REFERENCES PUBLIC.RESOURCE(ID) ('0d605d26-4ed4-4079-9975-56212a883380')"; SQL statement:
DELETE FROM RESOURCE WHERE (ID = ?) [23503-172]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
	at org.h2.message.DbException.get(DbException.java:169)
	at org.h2.message.DbException.get(DbException.java:146)
	at org.h2.constraint.ConstraintReferential.checkRow(ConstraintReferential.java:421)
	at org.h2.constraint.ConstraintReferential.checkRowRefTable(ConstraintReferential.java:438)
	at org.h2.constraint.ConstraintReferential.checkRow(ConstraintReferential.java:314)
	at org.h2.table.Table.fireConstraints(Table.java:880)
	at org.h2.table.Table.fireAfterRow(Table.java:897)
	at org.h2.command.dml.Delete.update(Delete.java:100)
	at org.h2.command.CommandContainer.update(CommandContainer.java:79)
	at org.h2.command.Command.executeUpdate(Command.java:235)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:154)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:140)
	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
	at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:885)
	... 56 more
... Removed 24 stack frames]]>
    </failure>
  </testcase> <!-- @AfterClass logout -->
  <testcase name="accountAddedToGroupOnCreation" time="0.015" classname="com.bleulace.domain.crm.command.CreateGroupCommandTest"/>
  <testcase name="createGroup" time="0.204" classname="com.bleulace.domain.crm.command.CreateGroupCommandTest"/>
  <testcase name="authentication" time="0.001" classname="com.bleulace.domain.crm.command.CreateGroupCommandTest"/>
</testsuite> <!-- Default test(failed) -->
